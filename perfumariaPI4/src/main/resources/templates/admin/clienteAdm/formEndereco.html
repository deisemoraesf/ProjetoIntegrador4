<!DOCTYPE html>
<html lang="pt-br" xmlns="http://www.w3.org/1999/xhtml"
				   xmlns:th="http://www.thymeleaf.org"
				   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
				   xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
				   
<script src="/webjars/jquery/jquery.min.js"></script>
<script src="/webjars/jquery-mask-plugin/dist/jquery.mask.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="/webjars/bootstrap/js/bootstrap.min.js"></script>
					   
<head>
<title>Perfumaria</title>
<meta charset="UTF-8" />

<!-- Bootstrap core CSS -->
<link href="/webjars/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
<link href="/webjars/open-iconic/font/css/open-iconic-bootstrap.min.css"
	rel="stylesheet" />

<!-- Custom styles for this template -->
<link href="/css/style.css" rel="stylesheet" />

<!-- Adicionando Javascript -->
    <script type="text/javascript" >
    
    function limpa_formulário_cep() {
            //Limpa valores do formulário de cep.
            document.getElementById('rua').value=("");
            document.getElementById('bairro').value=("");
            document.getElementById('cidade').value=("");
            document.getElementById('estado').value=("");
            //document.getElementById('ibge').value=("");
    }

    function meu_callback(conteudo) {
        if (!("erro" in conteudo)) {
            //Atualiza os campos com os valores.
            document.getElementById('rua').value=(conteudo.logradouro);
            document.getElementById('bairro').value=(conteudo.bairro);
            document.getElementById('cidade').value=(conteudo.localidade);
            document.getElementById('estado').value=(conteudo.uf);
            //document.getElementById('ibge').value=(conteudo.ibge);
        } //end if.
        else {
            //CEP não Encontrado.
            limpa_formulário_cep();
            alert("CEP não encontrado.");
        }
    }
        
    function pesquisacep(valor) {

        //Nova variável "cep" somente com dígitos.
        var cep = valor.replace(/\D/g, '');

        //Verifica se campo cep possui valor informado.
        if (cep != "") {

            //Expressão regular para validar o CEP.
            var validacep = /^[0-9]{8}$/;

            //Valida o formato do CEP.
            if(validacep.test(cep)) {

                //Preenche os campos com "..." enquanto consulta webservice.
                document.getElementById('rua').value="...";
                document.getElementById('bairro').value="...";
                document.getElementById('cidade').value="...";
                document.getElementById('estado').value="...";
                //document.getElementById('ibge').value="...";

                //Cria um elemento javascript.
                var script = document.createElement('script');

                //Sincroniza com o callback.
                script.src = 'https://viacep.com.br/ws/'+ cep + '/json/?callback=meu_callback';

                //Insere script no documento e carrega o conteúdo.
                document.body.appendChild(script);

            } //end if.
            else {
                //cep é inválido.
                limpa_formulário_cep();
                alert("Formato de CEP inválido.");
            }
        } //end if.
        else {
            //cep sem valor, limpa formulário.
            limpa_formulário_cep();
        }
    };

    </script>

</head>
<body>
	<header>
		<nav
			class="navbar navbar-inverse navbar navbar-dark bg-dark fixed-top">
			<div class="container-fluid">
				<div class="navbar-header">
					<button type="button" class="btn btn-dark navbar-toggle pull-left">
						<i class="oi oi-menu"></i>
					</button>
					<a class="navbar-brand navbar-toggle pull-left" href="/admin/">Painel de Controle</a>
				</div>
				<ul class="navbar-nav ml-auto"> 
                     <li class="nav-item dropdown" style="color:white">Seja Bem vindo,
                    	<span class="badge badge-dark" sec:authentication="name"></span>
                    	<span class="badge badge-dark" sec:authentication="principal.authorities"></span>
                        <a class="btn btn-outline-light" href="/logout" >Sair</a>
                        
                    </li>
                </ul>
			</div>
		</nav>
	</header>

	<div class="layout-main">



		<section class="layout-content">
			<div class="page-header">
				<nav class="navbar navbar-expand-md navbar-top bg-light">
					<div class="collapse navbar-collapse" id="navbarsExampleDefault">
						<ul class="navbar-nav">
							<li class="nav-item active"><i class="oi oi-caret-right"></i>
								<span>Endereços</span></li>
						</ul>
					</div>
				</nav>
			</div>

			<div class="container" id="cadastro">
						
				<form method="POST" >
				
					<div class="col-12 alert alert-success" th:if="${mensagem != null}" th:text="${mensagem}" role="alert"></div>
						<div class="form-row">

							<div class="form-group col-md-6" th:action="@{https://viacep.com.br/ws/{cep}/json/}">

							<label class="small mb-1" for="tipoend">Local:</label> <input
									type="text" class="form-control py-4" id="tipoend" name="tipoend"
									placeholder="Exemplo: Casa, Comercial" value="">
							
							
								<label class="small mb-1" for="cep">CEP:</label> 
								<input type="text" class="form-control py-4" id="cep" name="cep" 
									placeholder="Digite seu CEP" onblur="pesquisacep(this.value);"/>
									
																
								<label class="small mb-1" for="endereco">Logradouro:</label> 
								<input type="text" class="form-control py-4" id="rua" name="rua"
									placeholder="Digite o lograduro" value="">
							
								<label class="small mb-1" for="numero">Número:</label> <input
									type="text" class="form-control py-4" id="numero" name="numero"
									placeholder="Digite o número" value="">
							
								<label class="small mb-1" for="complemento">Complemento:</label>
								<input type="text" class="form-control py-4" id="complemento"
									name="complemento" placeholder="Digite o Complemento" value="">
							
								<label class="small mb-1" for="bairro">Bairro:</label> <input
									type="text" class="form-control py-4" id="bairro" name="bairro"
									placeholder="Digite o Bairro" value="" >
							
								<label class="small mb-1" for="cidade">Cidade:</label> <input
									type="text" class="form-control py-4" id="cidade"
									name="cidade" placeholder="Digite a Cidade" value="" >
							
								<label class="small mb-1" for="estado">Estado:</label> <input
									type="text" class="form-control py-4" id="estado"
									name="estado" placeholder="Digite o Estado" value="">

							<button type="submit" class="btn btn-primary btn-sm">Salvar</button>
							<a th:href="@{/clientesAdm/cadastrarEndereco/{id_pessoa}}" class="btn btn-primary btn-sm">Voltar</a>
						</div>

					</div>
			


			</form>
	</div>
	</section>

	</div>

	<footer class="layout-footer">
		<div class="container">
			<span class="footer-copy">&copy; 2020 Akatsuki. @Todos os direitos reservados.</span>
		</div>
	</footer>

</body>
</html>
